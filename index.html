<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Delaware City School District Status</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
    font-family: Arial, sans-serif;
    background: #1e1e1e; /* Dark Gray Background */
    color: #f0f0f0; /* Light Text */
    padding: 20px;
    text-align: center;
}
#status {
    font-size: 40px;
    font-weight: bold;
    padding: 25px;
    border-radius: 15px;
    display: inline-block;
    margin-top: 20px;
    min-width: 250px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4); /* Added subtle shadow */
}
/* --- Darker Status Colors --- */
.open { background: #388e3c; color: white; } /* Darker Green */
.delay { background: #f57f17; color: black; } /* Darker Amber/Orange */
.closed { background: #c62828; color: white; } /* Darker Red */
.unknown { background: #546e7a; color: white; } /* Dark Slate Gray */
</style>
</head>
<body>

<h1>Delaware City School District</h1>
<h3>Real-Time Status</h3>

<div id="status" class="unknown">Loading...</div>

<p>Auto-updates every 30 seconds.</p>

<script>
// IMPORTANT: This API is your old source, which is unstable due to CORS. 
// You should update this to your working Render proxy URL:
// const API = "https://delaware-status-proxy.onrender.com/status"; 
//
// However, since you provided the original code, I've left the API intact for now.

const API = "https://schoolstatus.io/api/v1/closings?state=OH"; // Original API Endpoint

async function loadStatus() {
    const box = document.getElementById("status");
    box.textContent = "Checking...";

    try {
        const response = await fetch(API);
        const data = await response.json();

        // --- NOTE: This client-side logic only works if you switch the API back to your proxy URL ---
        
        // Look for Delaware City School District
        const district = data.find(item =>
            item.name.toLowerCase().includes("delaware city school district")
        );

        if (!district) {
            // This is the logic for the original API which is now broken.
            // When using your proxy, the box should simply read the status property directly.
            box.textContent = "No data / Not reported";
            box.className = "unknown";
            return;
        }

        // Possible statuses this API returns:
        // "open" | "delayed" | "closed"
        const status = district.status.toLowerCase();

        if (status === "open") {
            box.textContent = "OPEN";
            box.className = "open";
        } else if (status.includes("delay")) {
            box.textContent = "DELAYED";
            box.className = "delay";
        } else if (status === "closed") {
            box.textContent = "CLOSED";
            box.className = "closed";
        } else {
            box.textContent = district.status;
            box.className = "unknown";
        }

    } catch (err) {
        box.textContent = "Error fetching data";
        box.className = "unknown";
    }
}

// run immediately + refresh every 30s
loadStatus();
setInterval(loadStatus, 30000);
</script>

</body>
</html>
